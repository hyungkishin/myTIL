# Remote Dictionary Server
- in-memory
- key-value

> in-memory 데이터베이스 의 특징을 갖고있다. <br/>
> 빠른 응답속도 및 높은 처리를 위해 disk 가 아닌 메모리에 데이터를 적재하고 활용한다. <br/>
> 하지만 많은 데이터를 저장하는데에는 용이하지 않다. <br/>

### Persistent on Disk
- 메모리에 있는 데이터를 Disk 에 저장하여 운용할 수 있다.
- 가용성이나 백업을 위한 조치라고 볼 수 있다.
  - RDB ( SnapShot ) : redis Data Base 의 약자로, 데이터베이스 백업 방식이라 보면된다. 
    - 1시간 단위로 전체 백업을 진행하거나, 1일 단위로 전체 백업을 진행하는 전략 방법이다.
      - 추후 문제가 발생하면, 백업된 데이터로 복구를 진행 하면 된다.
    - 실행 주기가 좀 길기 떄문에, 그 사이에 문제가 되면 그 시간만큼 데이터가 추가된다.
    - 또한 snapShot 과정 자체가 프로세스 포크 기반으로 진행이 되어, 메모리 사용이 급등하게 되어 모니터링이 반드시 필요하다.
  - AOF ( Append Only File )
    - 데이터 쓰기 작업 명령어들을 적재하는 방식을 말한다.
    - 일종에 히스토리를 쌓게 되는 것인데, 특정 시기의 데이터들을 백업하는 RDB 보단 좀더 복구에 대해선 장점이 있다.
    - 하지만 그만큼 데이터 용량을 더 많이 활용하게 되고, 디스크에 쓰기 작업이 더 빈번하게 발생하기 떄문에, 성능에 영향을 끼칠수 있다.

> RDB 와 AOF 둘중 한가지만 선택해서 사용하거나, 둘다 설정하여 활용하는것이 가능하다. <br/>
> 기본 설정은 RDB 만 활성화 되어있고, 단순 cache 용도로만 사용하면, RDB 와 AOF 두 기능 모두 끄고 사용하는것이 가능하다. <br/>
> 중요한 데이터라고 판단 되면, 둘다 활성화 시킬수 도 있다. <br/>
> 전략에 따라 다른 편 이다.

### Data Types 
- Strings
- Lists
- Sets
- Hashes
- Sorted sets

### Single Thread
- 외부로 부터 동시에 데이터를 전달 받을 수 있지만, 실질 처리는 순차적으로 하나씩만 진행한다.
- 내부적으로 lock 을 사용하지 않아도 원자적 실행이 가능하게 하는데, 이를 통해 데이터의 일관성을 가능케 한다.
  - 동시에 여러 명령어가 처리되는게 아니라, 하나씩 순차적으로 처리되기 떄문이다.

### 활용사례
- cache 로써 활용 될 때.
  - 반복되는 데이터베이스의 질의를 줄임으로써, DB 의 부담을 줄이고, 서비스의 낮은 응답속도를 제공할 수 있다.
- session store 의 활용
  - web application 의 세션 정보저장이 필요할때, 분산 저장소 로써 redis 가 활용 될 수 있다.
  - redis 에서의 TTL 로 인해 오래된 세션 데이터를 자동 삭제하고 관리하는데 유용하다
- pub/sub 으로써 활용될때.
  - web App 에선 pub/sub 을 이용해서, 비동기 처리 목적 을 가질 수 있고
  - 실시간 채팅과 같이 메시지 중개 를 위한 기능으로써도 활용이 된다.
- Message Queue 의 활용



### Redis의 TTL 특성 예
- Redis는 지정된 시간이 지나면 키가 자동으로 삭제되는 TTL 기능을 제공한다.
- 만료 시간을 설정하지 않으면 사용자가 명시적으로 삭제하지 않는 한 영원히 저장된다.
- 현재 컴퓨터 시간을 기반으로 TTL이 동작하기 때문에 만료 시간을 1000초로 설정해 놓고 현재 컴퓨터 시간을 2000초로 바꾸면 즉시 만료된다. 현재 컴퓨터 시간을 기반으로 TTL이 동작하기에, Redis 인스턴스가 현재 켜져 있지 않더라도 시간이 카운팅 된다.
- 2.4에서는 TTL 오차가 0~ 1초였지만 2.6부터는 TTL 오차가 0초 ~ 1 밀리초로 개선되었다.